# Variable declaration.
FILE=monografia
TEMP_FILE_EXTENSIONS=log aux lof loc lol lot bit idx glo bbl brf nlo nls ilg toc ind out blg snm nav soc thm
TEMP_FILE_LOCATIONS={.,sections,sections/chapters}
TEMP_FILE_NAMES=synctex.gz

# Command list.
.PHONY: all
.PHONY: clean

# Command to compile the latex file.
all:
	rm -f "$(FILE).pdf"
	pdflatex -file-line-error -interaction=nonstopmode "$(FILE).tex" > /dev/null 2>&1 || true
	pdflatex -file-line-error -interaction=nonstopmode "$(FILE).tex" > /dev/null 2>&1 || true
	bibtex "$(FILE).aux" > /dev/null 2>&1 || true
	bibtex "$(FILE).aux" > /dev/null 2>&1 || true
	pdflatex -file-line-error -interaction=nonstopmode "$(FILE).tex" > /dev/null 2>&1 || true
	makeindex "$(FILE)" || true
	makeindex "$(FILE).nlo" -s nomencl.ist -o "$(FILE).nls" > /dev/null 2>&1 || true
	pdflatex -file-line-error -interaction=nonstopmode "$(FILE).tex" > /dev/null 2>&1 || true
	pdflatex -file-line-error -interaction=nonstopmode "$(FILE).tex" > /dev/null 2>&1 || true

# Command to clean all temporary files generated by compilation.
clean:
	$(foreach ext,$(TEMP_FILE_EXTENSIONS),rm -rf $(TEMP_FILE_LOCATIONS)/*.$(ext);)
	$(foreach file,$(TEMP_FILE_NAMES),rm -rf $(TEMP_FILE_LOCATIONS)/$(file);)
